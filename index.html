<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DownUnder Cruises</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
/* css comes in part 2 */
</style>
</head>

<body>

<header id="mainHeader">
  <nav class="nav container">
    <a class="logo">
      <i class="fas fa-ship"></i>
      Down<span>Under</span> Cruises
    </a>

    <div class="nav-links" id="navLinks">
      <a href="#search">Search</a>
      <a href="#deals">Deals</a>
      <a href="#destinations">Destinations</a>
      <a href="#lines">Cruise Lines</a>
      <a href="#contact">Contact</a>
      <div class="cart-icon" onclick="openCartModal()">
        <i class="fas fa-shopping-cart"></i>
        <span id="cartCount">0</span>
      </div>
    </div>

    <div class="hamburger" id="hamburger">
      <span></span><span></span><span></span>
    </div>
  </nav>
</header>

<section class="hero" id="search">
  <div class="hero-content">
    <h1>Set Sail From Australia</h1>
    <p>2026 and beyond cruises departing Sydney Brisbane Melbourne and more</p>

    <div class="search-box">
      <h3>Search Cruises</h3>

      <form id="searchForm" class="search-grid">

        <select required>
          <option value="">Departure Port</option>
          <option>Sydney</option>
          <option>Brisbane</option>
          <option>Melbourne</option>
          <option>Perth</option>
          <option>Any Australian Port</option>
        </select>

        <select required>
          <option value="">Cruise Line</option>
          <option>Carnival</option>
          <option>Royal Caribbean</option>
          <option>Princess</option>
          <option>Celebrity</option>
          <option>Norwegian</option>
        </select>

        <select required>
          <option value="">Departure Month</option>
          <option>January 2026</option>
          <option>February 2026</option>
          <option>March 2026</option>
          <option>April 2026</option>
          <option>May 2026</option>
          <option>June 2026</option>
          <option>July 2026</option>
          <option>August 2026</option>
          <option>September 2026</option>
          <option>October 2026</option>
          <option>November 2026</option>
          <option>December 2026</option>
        </select>

        <select required>
          <option value="">Nights</option>
          <option>3 to 5</option>
          <option>6 to 9</option>
          <option>10 to 14</option>
          <option>15 plus</option>
        </select>

        <button type="submit">
          Search Cruises
        </button>

      </form>
    </div>
  </div>
</section>

<section id="deals" class="container">
  <h2>Featured Cruises</h2>

  <div class="card-grid">

    <div class="cruise-card" onclick="openCabinModal('southPacific')">
      <img src="https://images.pexels.com/photos/11820069/pexels-photo-11820069.jpeg">
      <div class="card-body">
        <h3>South Pacific Escape</h3>
        <p>9 nights from Sydney</p>
        <strong>from 899 AUD pp</strong>
        <button>Select</button>
      </div>
    </div>

    <div class="cruise-card" onclick="openCabinModal('nzFjords')">
      <img src="https://cruisepassenger.com.au/wp-content/uploads/2024/08/milford-sound-cruise-1536x865.jpg">
      <div class="card-body">
        <h3>New Zealand Fjords</h3>
        <p>12 nights roundtrip</p>
        <strong>from 1299 AUD pp</strong>
        <button>Select</button>
      </div>
    </div>

    <div class="cruise-card" onclick="openCabinModal('reef')">
      <img src="https://media.istockphoto.com/id/1077171172/photo/colourful-coral-scene-underwater-with-fish-and-divers.jpg">
      <div class="card-body">
        <h3>Great Barrier Reef</h3>
        <p>7 nights Brisbane</p>
        <strong>from 799 AUD pp</strong>
        <button>Select</button>
      </div>
    </div>

  </div>
</section>

<section id="destinations" class="container">
  <h2>Popular Destinations</h2>

  <div class="card-grid">
    <div class="info-card">
      <img src="https://www.jacadatravel.com/_next/image/?url=https%3A%2F%2Fcdn.jacadatravel.com%2Fwp-content%2Fuploads%2F2017%2F03%2Ffiji-princess-boat.jpg">
      <h3>South Pacific</h3>
    </div>

    <div class="info-card">
      <img src="https://cruisepassenger.com.au/wp-content/uploads/2024/08/milford-sound-cruise-1536x865.jpg">
      <h3>New Zealand</h3>
    </div>

    <div class="info-card">
      <img src="https://media.istockphoto.com/id/1077171172/photo/colourful-coral-scene-underwater-with-fish-and-divers.jpg">
      <h3>Great Barrier Reef</h3>
    </div>
  </div>
</section>

<section id="lines" class="container">
  <h2>Popular Cruise Lines</h2>

  <div class="card-grid">

    <div class="info-card">
      <img src="https://upload.wikimedia.org/wikipedia/commons/8/8b/Carnival_Splendor_at_Sydney.jpg">
      <h3>Carnival Cruise Line</h3>
      <p>Fun focused family cruising</p>
    </div>

    <div class="info-card">
      <img src="https://upload.wikimedia.org/wikipedia/commons/6/6c/Royal_Caribbean_International_ship.jpg">
      <h3>Royal Caribbean</h3>
      <p>Adventure and mega ships</p>
    </div>

    <div class="info-card">
      <img src="https://upload.wikimedia.org/wikipedia/commons/4/4c/Princess_Cruises_ship.jpg">
      <h3>Princess Cruises</h3>
      <p>Classic premium cruising</p>
    </div>

    <div class="info-card">
      <img src="https://upload.wikimedia.org/wikipedia/commons/5/5b/Celebrity_Cruises_ship.jpg">
      <h3>Celebrity Cruises</h3>
      <p>Modern luxury experience</p>
    </div>

  </div>
</section>

<section id="contact" class="container">
  <h2>Contact</h2>

  <form class="contact-form">
    <input type="text" placeholder="Full name" required>
    <input type="email" placeholder="Email" required>
    <input type="tel" placeholder="Phone number" required>
    <textarea placeholder="Message" required></textarea>
    <button type="submit">Send</button>
  </form>
</section>

<footer>
  <p>DownUnder Cruises Australia</p>
</footer>

<!-- cabin modal -->
<div id="cabinModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeCabinModal()">&times;</span>

    <h2 id="cabinTitle"></h2>

    <div id="cabinOptions"></div>

    <div id="passengerSection" style="display:none">
      <h3>Passenger details</h3>

      <div id="passengerForms"></div>

      <button onclick="validatePassengers()">Add to cart</button>
    </div>

  </div>
</div>

<!-- cart modal -->
<div id="cartModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeCartModal()">&times;</span>

    <h2>Booking summary</h2>

    <div id="cartItems"></div>

    <button onclick="confirmHold()">Place 48 hour hold</button>
  </div>
</div>

<script>
/* js comes in part 3 */
</script>

</body>
</html>
:root {
  --primary:#006b33;
  --primaryDark:#004d26;
  --accent:#ffd700;
  --dark:#002f19;
  --light:#f8f9fa;
  --gray:#6c757d;
  --radius:20px;
  --shadow:0 10px 30px rgba(0,0,0,.15);
}

* {
  margin:0;
  padding:0;
  box-sizing:border-box;
}

body {
  font-family:Poppins,sans-serif;
  background:var(--light);
  color:#222;
  padding-top:90px;
}

.container {
  max-width:1400px;
  margin:auto;
  padding:0 20px;
}

h1,h2,h3 {
  font-family:Playfair Display,serif;
}

h2 {
  text-align:center;
  margin-bottom:60px;
  font-size:48px;
  color:var(--primary);
}

header {
  position:fixed;
  top:0;
  left:0;
  right:0;
  background:rgba(0,107,51,.95);
  z-index:999;
  box-shadow:var(--shadow);
}

.nav {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:18px 0;
}

.logo {
  color:white;
  font-size:26px;
  font-weight:700;
  text-decoration:none;
}

.logo span {
  color:var(--accent);
}

.nav-links {
  display:flex;
  align-items:center;
  gap:32px;
}

.nav-links a {
  color:white;
  text-decoration:none;
  font-weight:600;
}

.cart-icon {
  position:relative;
  cursor:pointer;
  font-size:22px;
  color:white;
}

.cart-icon span {
  position:absolute;
  top:-8px;
  right:-10px;
  background:var(--accent);
  color:#000;
  width:20px;
  height:20px;
  border-radius:50%;
  font-size:12px;
  display:flex;
  align-items:center;
  justify-content:center;
}

.hamburger {
  display:none;
  flex-direction:column;
  gap:6px;
}

.hamburger span {
  width:30px;
  height:4px;
  background:white;
}

.hero {
  min-height:90vh;
  background:
    linear-gradient(rgba(0,0,0,.55),rgba(0,0,0,.65)),
    url("https://images.pexels.com/photos/11820069/pexels-photo-11820069.jpeg")
    center/cover fixed;
  display:flex;
  align-items:center;
  justify-content:center;
  color:white;
  text-align:center;
}

.hero-content {
  max-width:1000px;
  padding:20px;
}

.hero h1 {
  font-size:64px;
  margin-bottom:20px;
}

.hero p {
  font-size:20px;
  margin-bottom:40px;
}

.search-box {
  background:rgba(255,255,255,.2);
  backdrop-filter:blur(15px);
  padding:40px;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
}

.search-box h3 {
  color:white;
  margin-bottom:30px;
}

.search-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
}

select,
input,
textarea,
button {
  padding:16px;
  border-radius:var(--radius);
  border:none;
  font-size:16px;
}

select,
input,
textarea {
  background:white;
}

button {
  background:linear-gradient(135deg,var(--primary),var(--primaryDark));
  color:white;
  font-weight:700;
  cursor:pointer;
}

button:hover {
  transform:translateY(-3px);
}

.card-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
  gap:40px;
}

.cruise-card,
.info-card {
  background:white;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  overflow:hidden;
  transition:.4s;
}

.cruise-card:hover,
.info-card:hover {
  transform:translateY(-10px);
}

.cruise-card img,
.info-card img {
  width:100%;
  height:220px;
  object-fit:cover;
}

.card-body {
  padding:24px;
}

.card-body h3 {
  margin-bottom:10px;
  color:var(--primary);
}

.card-body p {
  margin-bottom:10px;
}

.info-card {
  text-align:center;
  padding-bottom:20px;
}

.info-card h3 {
  margin-top:20px;
  color:var(--primary);
}

.info-card p {
  padding:0 20px;
}

.contact-form {
  max-width:700px;
  margin:auto;
  display:grid;
  gap:20px;
}

footer {
  background:linear-gradient(135deg,var(--dark),var(--primaryDark));
  color:white;
  padding:40px;
  text-align:center;
  margin-top:80px;
}

.modal {
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.8);
  z-index:2000;
}

.modal-content {
  background:white;
  max-width:1100px;
  margin:5vh auto;
  padding:40px;
  border-radius:var(--radius);
  position:relative;
}

.close {
  position:absolute;
  right:30px;
  top:20px;
  font-size:32px;
  cursor:pointer;
}

#cabinOptions {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:30px;
  margin-top:40px;
}

.cabin-card {
  background:#f0f8ff;
  padding:30px;
  border-radius:var(--radius);
  text-align:center;
  box-shadow:var(--shadow);
}

.cabin-card h4 {
  color:var(--primary);
  margin-bottom:10px;
}

.cabin-card p {
  margin-bottom:15px;
}

#passengerForms {
  display:grid;
  gap:30px;
  margin-top:40px;
}

.passenger-block {
  background:#f9f9f9;
  padding:25px;
  border-radius:var(--radius);
}

.passenger-block h4 {
  margin-bottom:15px;
  color:var(--primary);
}

.passenger-block .grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:20px;
}

#cartItems {
  margin-top:30px;
}

.cart-item {
  display:grid;
  grid-template-columns:1fr auto;
  gap:20px;
  padding:20px 0;
  border-bottom:1px solid #ddd;
}

@media(max-width:900px) {
  .nav-links {
    position:absolute;
    top:100%;
    left:0;
    right:0;
    background:var(--primary);
    flex-direction:column;
    padding:30px;
    display:none;
  }

  .hamburger {
    display:flex;
  }
}

@media(max-width:600px) {
  h2 {
    font-size:36px;
  }

  .hero h1 {
    font-size:44px;
  }

  .search-box {
    padding:25px;
  }
}
<script>
const cruiseData = {
  carnival:{
    slogan:"Fun Ships for Everyone",
    perks:[
      "Water parks",
      "Comedy clubs",
      "Family activities",
      "Affordable pricing"
    ],
    ships:[
      "Carnival Mardi Gras",
      "Carnival Celebration",
      "Carnival Panorama"
    ]
  },
  royal:{
    slogan:"Bold Adventures at Sea",
    perks:[
      "Surf simulators",
      "Skydiving",
      "Broadway shows",
      "Mega ships"
    ],
    ships:[
      "Wonder of the Seas",
      "Icon of the Seas",
      "Oasis of the Seas"
    ]
  },
  princess:{
    slogan:"Come Back New",
    perks:[
      "Premium dining",
      "Medallion tech",
      "Luxury service",
      "Relaxed cruising"
    ],
    ships:[
      "Sky Princess",
      "Regal Princess",
      "Discovery Princess"
    ]
  },
  celebrity:{
    slogan:"Nothing Comes Close",
    perks:[
      "Modern luxury",
      "High end dining",
      "Stylish ships",
      "Adult focused"
    ],
    ships:[
      "Celebrity Beyond",
      "Celebrity Edge",
      "Celebrity Apex"
    ]
  },
  norwegian:{
    slogan:"Cruise Your Way",
    perks:[
      "Freestyle dining",
      "No fixed schedules",
      "Solo cabins",
      "Entertainment"
    ],
    ships:[
      "Norwegian Prima",
      "Norwegian Encore",
      "Norwegian Bliss"
    ]
  }
}

const cabinRules = {
  interior:{
    maxGuests:4,
    childrenAllowed:true,
    notes:"No windows best value"
  },
  ocean:{
    maxGuests:4,
    childrenAllowed:true,
    notes:"Natural light"
  },
  balcony:{
    maxGuests:4,
    childrenAllowed:true,
    notes:"Private outdoor space"
  },
  suite:{
    maxGuests:6,
    childrenAllowed:true,
    notes:"Priority boarding concierge"
  }
}

function renderCruiseInfo(line) {
  const data = cruiseData[line]
  const info = document.getElementById("cruiseInfo")
  if(!info) return

  info.innerHTML = `
    <h3>${cruiseLines[line].name}</h3>
    <p>${data.slogan}</p>
    <ul>
      ${data.perks.map(p=>`<li>${p}</li>`).join("")}
    </ul>
    <strong>Popular Ships</strong>
    <ul>
      ${data.ships.map(s=>`<li>${s}</li>`).join("")}
    </ul>
  `
}

function enforceCabinLimits() {
  const cabin = cabinRules[state.cabin.id]
  const total = Number(document.getElementById("adultCount").value) +
                Number(document.getElementById("childCount").value)

  if(total > cabin.maxGuests) {
    alert("Too many passengers for this cabin")
    return false
  }
  return true
}

function buildPassengers() {
  const adults = Number(document.getElementById("adultCount").value)
  const children = Number(document.getElementById("childCount").value)

  if(adults < 1) {
    alert("At least one adult required")
    return
  }

  if(!enforceCabinLimits()) return

  passengerWrap.innerHTML = ""
  state.passengers = []

  for(let i=0;i<adults;i++) {
    createPassengerForm("Adult",i)
  }

  for(let j=0;j<children;j++) {
    createPassengerForm("Child",j)
  }

  renderLoyalty()
  renderSummary()
  renderHoldButton()
}

function renderSummary() {
  const div = document.createElement("div")
  div.className = "passenger-block"
  div.innerHTML = `
    <h4>Booking Summary</h4>
    <p>Cruise Line ${cruiseLines[state.cruise].name}</p>
    <p>Cabin ${state.cabin.name}</p>
    <p>Base Price $${state.cabin.price} AUD per person</p>
  `
  passengerWrap.appendChild(div)
}

function priceEstimate() {
  const adults = Number(document.getElementById("adultCount").value)
  const children = Number(document.getElementById("childCount").value)
  const totalPeople = adults + children
  return totalPeople * state.cabin.price
}

function placeHold() {
  const inputs = passengerWrap.querySelectorAll("input")
  for(const i of inputs) {
    if(!i.value) {
      alert("Fill all fields")
      return
    }
  }

  const total = priceEstimate()

  state.cart.push({
    cruise:state.cruise,
    cabin:state.cabin.name,
    total,
    holdExpires:Date.now() + 172800000
  })

  cartCount.innerText = state.cart.length
  closeBooking()
  alert("48 hour hold placed total $" + total + " AUD")
}
</script>
<script>
const admin = {
  holds:[],
  logs:[]
}

function openCart() {
  const modal = document.createElement("div")
  modal.className = "modal"
  modal.style.display = "block"

  const box = document.createElement("div")
  box.className = "modal-content"

  let html = "<h3>Your Holds</h3>"

  if(state.cart.length === 0) {
    html += "<p>No holds yet</p>"
  }

  state.cart.forEach((c,i)=>{
    const exp = new Date(c.holdExpires).toLocaleString()
    html += `
      <div class="cart-item">
        <div>
          <strong>${c.cabin}</strong>
          <p>${cruiseLines[c.cruise].name}</p>
          <p>Expires ${exp}</p>
          <p>Total $${c.total} AUD</p>
        </div>
        <button onclick="removeHold(${i})">Remove</button>
      </div>
    `
  })

  box.innerHTML = `
    <span class="close" onclick="this.parentElement.parentElement.remove()">Ã—</span>
    ${html}
  `
  modal.appendChild(box)
  document.body.appendChild(modal)
}

function removeHold(i) {
  state.cart.splice(i,1)
  cartCount.innerText = state.cart.length
  document.querySelector(".modal").remove()
  openCart()
}

function logAdmin(event,data) {
  admin.logs.push({
    time:new Date().toISOString(),
    event,
    data
  })
}

function syncAdmin() {
  state.cart.forEach(h=>{
    admin.holds.push(h)
  })
}

function fakePaymentInit() {
  return {
    provider:"stripe like",
    currency:"AUD",
    status:"ready"
  }
}

function validateEmail(email) {
  return email.includes("@") && email.includes(".")
}

function validatePhone(phone) {
  return phone.length >= 8
}

function validatePassengerForms() {
  const blocks = document.querySelectorAll(".passenger-block")
  for(const b of blocks) {
    const inputs = b.querySelectorAll("input")
    for(const i of inputs) {
      if(!i.value) return false
      if(i.placeholder === "Email" && !validateEmail(i.value)) return false
      if(i.placeholder === "Phone" && !validatePhone(i.value)) return false
    }
  }
  return true
}

function enhanceButtons() {
  const btns = document.querySelectorAll("button")
  btns.forEach(b=>{
    b.addEventListener("mouseover",()=>{
      b.style.opacity = ".9"
    })
    b.addEventListener("mouseout",()=>{
      b.style.opacity = "1"
    })
  })
}

function initSite() {
  enhanceButtons()
  document.querySelectorAll(".cruise-card button").forEach(btn=>{
    btn.addEventListener("click",()=>{
      logAdmin("openBooking",btn.innerText)
    })
  })
}

document.addEventListener("DOMContentLoaded",initSite)

window.addEventListener("beforeunload",()=>{
  syncAdmin()
})

function renderAdminPanel() {
  const panel = document.createElement("div")
  panel.style.position = "fixed"
  panel.style.bottom = "20px"
  panel.style.right = "20px"
  panel.style.background = "#fff"
  panel.style.padding = "20px"
  panel.style.borderRadius = "12px"
  panel.style.boxShadow = "0 10px 30px rgba(0,0,0,.2)"
  panel.style.zIndex = "5000"

  panel.innerHTML = `
    <strong>Admin Debug</strong>
    <p>Active Holds ${admin.holds.length}</p>
    <button onclick="console.log(admin)">Log Admin</button>
  `
  document.body.appendChild(panel)
}

setTimeout(renderAdminPanel,2000)
</script>
<script>
function safeQuery(sel) {
  try {
    return document.querySelector(sel)
  } catch {
    return null
  }
}

function lockScroll(lock) {
  document.body.style.overflow = lock ? "hidden" : "auto"
}

const oldOpen = openBooking
openBooking = function(line) {
  lockScroll(true)
  oldOpen(line)
}

const oldClose = closeBooking
closeBooking = function() {
  lockScroll(false)
  oldClose()
}

window.addEventListener("resize",()=>{
  const w = window.innerWidth
  if(w < 700) {
    document.body.classList.add("mobile")
  } else {
    document.body.classList.remove("mobile")
  }
})

function runtimeChecks() {
  if(!modal) console.error("modal missing")
  if(!cabinWrap) console.error("cabin wrap missing")
  if(!passengerWrap) console.error("passenger wrap missing")
}

runtimeChecks()

function preventDoubleHold() {
  let locked = false
  const old = placeHold
  placeHold = function() {
    if(locked) return
    locked = true
    setTimeout(()=>locked=false,1500)
    old()
  }
}

preventDoubleHold()

function autoFormatPhone() {
  document.addEventListener("input",e=>{
    if(e.target.placeholder === "Phone") {
      e.target.value = e.target.value.replace(/[^0-9]/g,"")
    }
  })
}

autoFormatPhone()

function autoEmailLower() {
  document.addEventListener("input",e=>{
    if(e.target.placeholder === "Email") {
      e.target.value = e.target.value.toLowerCase()
    }
  })
}

autoEmailLower()

function holdExpiryWatcher() {
  setInterval(()=>{
    const now = Date.now()
    state.cart = state.cart.filter(h=>h.holdExpires > now)
    cartCount.innerText = state.cart.length
  },60000)
}

holdExpiryWatcher()

console.log("site loaded ok")
</script>
<script>
function fadeIn(el) {
  el.style.opacity = 0
  el.style.transform = "translateY(20px)"
  setTimeout(()=>{
    el.style.transition = "0.6s"
    el.style.opacity = 1
    el.style.transform = "translateY(0)"
  },50)
}

function animateCards() {
  document.querySelectorAll(".cruise-card,.cabin-card,.info-card").forEach((c,i)=>{
    setTimeout(()=>fadeIn(c),i*120)
  })
}

document.addEventListener("DOMContentLoaded",animateCards)

function smoothScroll() {
  document.querySelectorAll("a[href^='#']").forEach(a=>{
    a.addEventListener("click",e=>{
      e.preventDefault()
      const t = document.querySelector(a.getAttribute("href"))
      if(t) t.scrollIntoView({behavior:"smooth"})
    })
  })
}

smoothScroll()

function highlightSelection() {
  document.addEventListener("click",e=>{
    if(e.target.closest(".cabin-card")) {
      document.querySelectorAll(".cabin-card").forEach(c=>{
        c.style.outline = "none"
      })
      e.target.closest(".cabin-card").style.outline = "3px solid gold"
    }
  })
}

highlightSelection()

function loadingOverlay(show) {
  let o = document.getElementById("loadingOverlay")
  if(!o) {
    o = document.createElement("div")
    o.id = "loadingOverlay"
    o.style.position = "fixed"
    o.style.inset = "0"
    o.style.background = "rgba(0,0,0,.7)"
    o.style.display = "flex"
    o.style.alignItems = "center"
    o.style.justifyContent = "center"
    o.style.color = "white"
    o.style.fontSize = "28px"
    o.innerText = "processing"
    document.body.appendChild(o)
  }
  o.style.display = show ? "flex" : "none"
}

const oldPlaceHoldFinal = placeHold
placeHold = function() {
  loadingOverlay(true)
  setTimeout(()=>{
    loadingOverlay(false)
    oldPlaceHoldFinal()
  },900)
}

function sectionObserver() {
  const obs = new IntersectionObserver(entries=>{
    entries.forEach(en=>{
      if(en.isIntersecting) fadeIn(en.target)
    })
  },{threshold:.2})

  document.querySelectorAll("section").forEach(s=>obs.observe(s))
}

sectionObserver()

console.log("ui enhanced")
</script>
<script>
function addMeta() {
  const metaDesc = document.createElement("meta")
  metaDesc.name = "description"
  metaDesc.content = "Book cruises online Australia best cruise deals family luxury cabins 48 hour hold"
  document.head.appendChild(metaDesc)

  const metaView = document.createElement("meta")
  metaView.name = "viewport"
  metaView.content = "width=device-width initial-scale=1"
  document.head.appendChild(metaView)
}

addMeta()

function accessibilityFixes() {
  document.querySelectorAll("button").forEach(b=>{
    b.setAttribute("aria-role","button")
    b.setAttribute("tabindex","0")
  })

  document.querySelectorAll("input").forEach(i=>{
    if(!i.placeholder) return
    i.setAttribute("aria-label",i.placeholder)
  })
}

accessibilityFixes()

function keyboardSupport() {
  document.addEventListener("keydown",e=>{
    if(e.key === "Enter") {
      const a = document.activeElement
      if(a && a.tagName === "BUTTON") a.click()
    }
  })
}

keyboardSupport()

function saveState() {
  localStorage.setItem("cruiseState",JSON.stringify(state))
}

function loadState() {
  const s = localStorage.getItem("cruiseState")
  if(!s) return
  try {
    const parsed = JSON.parse(s)
    Object.assign(state,parsed)
    cartCount.innerText = state.cart.length
  } catch {}
}

window.addEventListener("beforeunload",saveState)
loadState()

function clearExpiredOnLoad() {
  const now = Date.now()
  state.cart = state.cart.filter(h=>h.holdExpires > now)
  cartCount.innerText = state.cart.length
}

clearExpiredOnLoad()

function fakeAnalytics(event) {
  console.log("analytics",event)
}

document.addEventListener("click",e=>{
  if(e.target.tagName === "BUTTON") {
    fakeAnalytics(e.target.innerText)
  }
})

function priceFormatter(n) {
  return "$" + n.toLocaleString("en-AU") + " AUD"
}

function enhancePrices() {
  document.querySelectorAll(".cabin-card p").forEach(p=>{
    if(p.innerText.includes("$")) {
      const num = Number(p.innerText.replace(/[^0-9]/g,""))
      p.innerText = priceFormatter(num)
    }
  })
}

setTimeout(enhancePrices,300)

function trustBadges() {
  const f = document.querySelector("footer")
  if(!f) return
  const div = document.createElement("div")
  div.style.marginTop = "20px"
  div.innerHTML = `
    <p>Secure booking</p>
    <p>Australian owned</p>
    <p>No payment taken on hold</p>
  `
  f.appendChild(div)
}

trustBadges()

function finalCheck() {
  console.log("site ready")
  console.log("total holds",state.cart.length)
}

finalCheck()
</script>